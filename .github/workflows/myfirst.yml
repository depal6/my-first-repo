name: My First github action
on:
  push:
    branches:
      - main

# A workflow run is made up of one or more jobs that can run sequentially or in parallel
jobs:
  # example with gcloud service account key, except using google-github-actions/auth step. the login is handled by this action 
  build-and-push-to-gcr-without-gcloud-auth-action:
    name: Build & push - without gcloud auth action
    runs-on: ubuntu-latest
    
    steps:
      #- uses: actions/checkout@v3
      #- name: Building and pushing the image
       # run : docker build -t app-my-first-api:1.0.0 .

      - id: "build treasuremap docker image"
        name: "gcr.io/cloud-builders/docker"
        timeout: 600s
        args:
          - "build"
          - "-t"
          - "eu.gcr.io/ingka-native-ikealabs-dev/app-my-first-api"
          - "."

   